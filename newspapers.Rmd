---
title: "newspapers"
author: "Elise Hachfeld"
date: "2024-12-08"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(httr2)
library(jsonlite)

base <- "https://www.loc.gov/collections/chronicling-america/"

params <-  list(dl = "page",
                start_date = "1941-12-01",
                end_date = "1941-12-31",
                location_state = "MN",
                fa = "language:English",
                front_pages_only = "true",
                fo = "json")

req <- request(base) |>
  req_url_query(!!!query_params, multi = "explode")

response <- req |> 
  req_perform()

resp_json_list <- resp_body_json(response)
head(resp_json_list, 2)

resp_json_df <- resp_body_json(response, simplifyVector = TRUE)
head(resp_json_df)

resp_json_df <- janitor::row_to_names(resp_json_df, 1)
head(resp_json_df)
```